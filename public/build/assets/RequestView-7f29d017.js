import{r as C,T as D,a as p,b as h,d as e,u as r,_ as t,Z as j,e as s,f as m,t as u,j as q,g as y,n as B,i as _,h as o,F as T,p as x}from"./app-398ad6d1.js";import{_ as $}from"./GoBackNavLink-db60fb6d.js";import{_ as A}from"./ReqTabs-6ec8a6f8.js";import{_ as w,X as N}from"./XIcon-14a341ca.js";import{P}from"./PrimaryButton-9082dc5b.js";import{S as v}from"./sweetalert2.all-e0b4b42d.js";import{_ as E}from"./Card-915d2e9b.js";import{C as I}from"./CheckIcon-10de2a8c.js";import{D as V,_ as l,a as n,b as i}from"./DD-bab2c687.js";import{r as W}from"./useRequestTypes-57bc341b.js";import"./_plugin-vue_export-helper-c27b6911.js";const F={class:"py-8"},M={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},O={class:"flex justify-between items-center mb-4"},Y={class:"card-header mb-2"},L={key:0,class:"flex inline-flex gap-4"},U=["onSubmit"],X={class:"mb-2 ml-1 font-semibold"},z=["onSubmit"],oe={__name:"RequestView",props:{request:Object},setup(a){const b=a,f=C(""),d=D({status:"",admin_response:""}),k=()=>{v.mixin({customClass:{cancelButton:"mx-4 text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900",confirmButton:"text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900"},buttonsStyling:!1}).fire({title:t("Are you sure You want to :sth this request?",{sth:f.value}),icon:"warning",showCancelButton:!0,confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),inputLabel:f.value===t("reject")?t("(Optional) Provide a reason for rejecting this request:"):"",input:f.value===t("reject")?"textarea":"",inputPlaceholder:f.value===t("reject")?t("We can't accept this leave this week as Mark and Jose will be off and we will be understaffed."):"",reverseButtons:!0}).then(c=>{c.isConfirmed&&(d.admin_response=f.value===t("reject")?c.value:"",d.put(route("requests.update",{id:b.request.id}),{preserveScroll:!0,onError:()=>{x().error(t("Error Updating Request Status"))},onSuccess:()=>{x().success(t("Request Status Updated Successfully"))}}))})},S=()=>{v.mixin({customClass:{confirmButton:"mx-4 text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900",cancelButton:"text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900"},buttonsStyling:!1}).fire({title:t("Are you sure?"),text:t("You won't be able to revert this!"),icon:"warning",showCancelButton:!0,confirmButtonText:t("Yes, Delete!"),cancelButtonText:t("No, Cancel!"),reverseButtons:!0}).then(c=>{c.isConfirmed&&d.delete(route("requests.destroy",{id:b.request.id}),{preserveScroll:!0,onError:()=>{x().error(t("Error Deleting Request"))},onSuccess:()=>{v.fire(t("Request Removed!"),"","success")}})})};return(g,c)=>(p(),h(T,null,[e(r(j),{title:r(t)("Request Data")},null,8,["title"]),e($,null,{tabs:s(()=>[e(A)]),default:s(()=>[m("div",F,[m("div",M,[e(E,{class:"!mt-0"},{default:s(()=>[m("div",null,[m("div",O,[m("h1",Y,u(r(t)("Request #:id Data",{id:a.request.id})),1),g.$page.props.auth.user.roles.includes("admin")?(p(),h("div",L,[m("form",{onSubmit:q(k,["prevent"]),class:"flex gap-4"},[a.request.status!=="Approved"?(p(),y(w,{key:0,text:r(t)("Approve Request"),onClick:c[0]||(c[0]=R=>{r(d).status=1,f.value=r(t)("approve")}),class:B({"opacity-25":r(d).processing}),disabled:r(d).processing},{default:s(()=>[e(I)]),_:1},8,["text","class","disabled"])):_("",!0),a.request.status!=="Rejected"?(p(),y(w,{key:1,text:r(t)("Reject Request"),onClick:c[1]||(c[1]=R=>{r(d).status=2,f.value=r(t)("reject")}),class:B({"opacity-25":r(d).processing}),disabled:r(d).processing},{default:s(()=>[e(N)]),_:1},8,["text","class","disabled"])):_("",!0)],40,U)])):_("",!0)]),m("h2",X,u(r(t)("Request Info")),1),e(V,null,{default:s(()=>[e(l,{colored:""},{default:s(()=>[e(n,null,{default:s(()=>[o(u(r(t)("ID")),1)]),_:1}),e(i,null,{default:s(()=>[o(u(a.request.id),1)]),_:1})]),_:1}),e(l,{colored:""},{default:s(()=>[e(n,null,{default:s(()=>[o(u(r(t)("Created By")),1)]),_:1}),e(i,null,{default:s(()=>[o(u(a.request.employee.name),1)]),_:1})]),_:1}),e(l,null,{default:s(()=>[e(n,null,{default:s(()=>[o(u(r(t)("Request Type")),1)]),_:1}),e(i,null,{default:s(()=>[o(u(r(W)[a.request.type]),1)]),_:1})]),_:1}),e(l,null,{default:s(()=>[e(n,null,{default:s(()=>[o(u(r(t)("Request Message")),1)]),_:1}),e(i,null,{default:s(()=>[o(u(a.request.message),1)]),_:1})]),_:1}),e(l,{colored:""},{default:s(()=>[e(n,null,{default:s(()=>[o(u(r(t)("From Date")),1)]),_:1}),e(i,null,{default:s(()=>[o(u(a.request.start_date),1)]),_:1})]),_:1}),e(l,{colored:""},{default:s(()=>[e(n,null,{default:s(()=>[o(u(r(t)("To Date")),1)]),_:1}),e(i,null,{default:s(()=>[o(u(a.request.end_date??r(t)("N/A")),1)]),_:1})]),_:1}),e(l,null,{default:s(()=>[e(n,null,{default:s(()=>[o(u(r(t)("Submission Date")),1)]),_:1}),e(i,null,{default:s(()=>[o(u(new Date(b.request.created_at).toISOString().split("T")[0]),1)]),_:1})]),_:1}),e(l,null,{default:s(()=>[e(n,null,{default:s(()=>[o(u(r(t)("Status")),1)]),_:1}),e(i,null,{default:s(()=>[o(u(a.request.status==="Pending"?r(t)("Pending")+" ⏳":a.request.status==="Approved"?r(t)("Approved")+" ✅":r(t)("Rejected")+" 🚫"),1)]),_:1})]),_:1}),e(l,{colored:""},{default:s(()=>[e(n,null,{default:s(()=>[o(u(r(t)("Admin Response")),1)]),_:1}),e(i,null,{default:s(()=>[o(u(a.request.admin_response??"-"),1)]),_:1})]),_:1}),e(l,{colored:""},{default:s(()=>[e(n),e(i)]),_:1})]),_:1}),g.$page.props.auth.user.roles.includes("admin")?(p(),h("form",{key:0,onSubmit:q(S,["prevent"]),class:"flex justify-end"},[e(P,{class:"bg-red-600 hover:bg-red-700 ml-4 mt-4 focus:bg-red-500 active:bg-red-900"},{default:s(()=>[o(u(r(t)("Delete Request")),1)]),_:1})],40,z)):_("",!0)])]),_:1})])])]),_:1})],64))}};export{oe as default};
